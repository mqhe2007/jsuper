!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e="undefined"!=typeof globalThis?globalThis:e||self).jsuper={})}(this,(function(e){"use strict";function n(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function t(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}function i(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function o(e,n){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return i(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?i(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,f=!0,a=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return f=e.done,e},e:function(e){a=!0,u=e},f:function(){try{f||null==t.return||t.return()}finally{if(a)throw u}}}}var u=function(){function e(t,r){n(this,e),this.delayTime=t,this.timeoutHandler=r,this.timer=void 0}return r(e,[{key:"listen",value:function(){window.addEventListener("click",this.resetTime),window.addEventListener("keydown",this.resetTime),window.addEventListener("mousemove",this.resetTime),window.addEventListener("mousewheel",this.resetTime)}},{key:"clearListen",value:function(){clearTimeout(this.timer),window.removeEventListener("click",this.resetTime),window.removeEventListener("keydown",this.resetTime),window.removeEventListener("mousemove",this.resetTime),window.removeEventListener("mousewheel",this.resetTime)}},{key:"resetTime",value:function(){var e=this;clearTimeout(this.timer),this.timer=setTimeout((function(){e.timeoutHandler(),e.clearListen(),e.timer=void 0}),1e3*this.delayTime)}}]),e}();var f=function(){function e(){n(this,e),this.events={}}return r(e,[{key:"emit",value:function(e,n){if(!this.events[e])return console.warn("".concat(e,"事件触发了，但是没有监听者，什么都不会发生。"));var t,r=o(this.events[e].values());try{for(r.s();!(t=r.n()).done;){(0,t.value)(n)}}catch(e){r.e(e)}finally{r.f()}}},{key:"on",value:function(e,n){"function"==typeof n&&(this.events[e]||(this.events[e]=new Set),this.events[e].add(n))}},{key:"off",value:function(e,n){if(!n)return console.warn("取消监听必须传入已被监听的事件处理函数");this.events[e].delete(n)}},{key:"clear",value:function(){this.events={}}},{key:"getEvents",value:function(){return this.events}}]),e}();e.EventBus=f,e.NoActionListener=u,e.findNodeFromTree=function e(n,t,r,i){for(var o=0;o<t.length;o++){var u=t[o];if(u[n[0]]===n[1])return r&&i?(u.parent=i,u):u;if(u.children&&u.children.length>0){i&&(u.parent=i);var f=e(n,u.children,r,u);if(f)return f}}},e.flatToTree=function(e,n,t){var r=[];return e.forEach((function(i){i[t]?r.push(function r(i){var o=e.findIndex((function(e){return e[n]===i[t]}));if(o>-1){var u=e.splice(o,1)[0];return u.children=[],u.children.push(i),u[t]?r(u):u}return i}(i)):r.push(i)})),r},e.platform=function(){var e=navigator.userAgent.toLowerCase();return-1!==e.indexOf("micromessenger")?"wechat":-1!==e.indexOf("iphone")||-1!==e.indexOf("ipad")?"ios":-1!==e.indexOf("android")?"android":"desktop"},e.position=function(e){return{top:function(e){for(var n=e.offsetTop,t=e.offsetParent;null!==t;)n+=t.offsetTop,t=t.offsetParent;return n}(e),left:function(e){for(var n=e.offsetLeft,t=e.offsetParent;null!==t;)n+=t.offsetLeft,t=t.offsetParent;return n}(e)}},e.treeEach=function e(n,t){n.forEach((function(n){var r;t(n),(null===(r=n.children)||void 0===r?void 0:r.length)&&e(n.children)}))},e.treeFilter=function e(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return n.filter((function(n){var i=t(n,r);return i&&n.children&&n.children.length>0&&(n.children=e(n.children,t,r+1)),i}))},e.treeMap=function e(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"children",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4?arguments[4]:void 0;return n.map((function(n){var u=t(n,i,o);return n[r]&&n[r].length>0&&(u.children=e(n[r],t,r,i+1,u)),u}))},e.uuid=function(){var e=(new Date).getTime();return window.performance&&"function"==typeof window.performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxx".replace(/[xy]/g,(function(n){var t=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==n?t:3&t|8).toString(16)}))},Object.defineProperty(e,"__esModule",{value:!0})}));
