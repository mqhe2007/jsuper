function h(){let e=navigator.userAgent.toLowerCase();return e.indexOf("micromessenger")!==-1?"wechat":e.indexOf("iphone")!==-1||e.indexOf("ipad")!==-1?"ios":e.indexOf("android")!==-1?"android":"desktop"}var p=h;var u=class{delayTime;timeoutHandler;timer;constructor(r,t){this.delayTime=r,this.timeoutHandler=t,this.timer=void 0}listen(){window.addEventListener("click",this.resetTime.bind(this)),window.addEventListener("keydown",this.resetTime.bind(this)),window.addEventListener("mousemove",this.resetTime.bind(this)),window.addEventListener("mousewheel",this.resetTime.bind(this))}clearListen(){this.timer&&clearTimeout(this.timer),window.removeEventListener("click",this.resetTime.bind(this)),window.removeEventListener("keydown",this.resetTime.bind(this)),window.removeEventListener("mousemove",this.resetTime.bind(this)),window.removeEventListener("mousewheel",this.resetTime.bind(this))}resetTime(){this.timer&&clearTimeout(this.timer),this.timer=setTimeout(()=>{this.timeoutHandler(),this.clearListen(),this.timer=void 0},this.delayTime*1e3)}},w=u;function v(){let e=new Date().getTime();return window.performance&&typeof window.performance.now=="function"&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxx".replace(/[xy]/g,function(i){let o=(e+Math.random()*16)%16|0;return e=Math.floor(e/16),(i=="x"?o:o&3|8).toString(16)})}var T=v;function l(e,r,t,i){for(let o=0;o<r.length;o++){let n=r[o];if(n[e[0]]===e[1])return t&&i&&(n.parent=i),n;if(n.children&&n.children.length>0){i&&(n.parent=i);let s=l(e,n.children,t,n);if(s)return s}}}var x=l;function a(e,r,t="children",i=1,o){return e.map(n=>{let s=r(n,i,o);return n[t]&&n[t].length>0&&(s.children=a(n[t],r,t,i+1,s)),s})}var _=a;function y(e,r,t){let i=[],o=function(n){let s=e.findIndex(d=>d[r]===n[t]);if(s>-1){let d=e.splice(s,1)[0];return d.children=[],d.children.push(n),d[t]?o(d):d}else return n};return e.forEach(n=>{n[t]?i.push(o(n)):i.push(n)}),i}var E=y;var f=class{events;constructor(){this.events={}}emit(r,t){if(!this.events[r])return console.warn(`${r}\u4E8B\u4EF6\u89E6\u53D1\u4E86\uFF0C\u4F46\u662F\u6CA1\u6709\u76D1\u542C\u8005\uFF0C\u4EC0\u4E48\u90FD\u4E0D\u4F1A\u53D1\u751F\u3002`);for(let i of this.events[r].values())i(t)}on(r,t){typeof t=="function"&&(this.events[r]||(this.events[r]=new Set),this.events[r].add(t))}off(r,t){if(!t)return console.warn("\u53D6\u6D88\u76D1\u542C\u5FC5\u987B\u4F20\u5165\u5DF2\u88AB\u76D1\u542C\u7684\u4E8B\u4EF6\u5904\u7406\u51FD\u6570");this.events[r]?.delete(t)}clear(){this.events={}}getEvents(){return this.events}},g=f;var b=(e,r)=>{if(typeof r!="function")return console.error(`${e}\u4E8B\u4EF6\u7684\u5904\u7406\u7A0B\u5E8F\u4E0D\u662F\u51FD\u6570\u3002`);let t=Symbol.for("___JSUPER_EVENT_BUS___");window[t].has(e)||window[t].set(e,new Set),window[t].get(e).add(r)},S=(e,r)=>{let t=Symbol.for("___JSUPER_EVENT_BUS___");if(!window[t].has(e))return console.warn(`${e}\u4E8B\u4EF6\u89E6\u53D1\u4E86\uFF0C\u4F46\u662F\u6CA1\u6709\u76D1\u542C\u8005\uFF0C\u4EC0\u4E48\u90FD\u4E0D\u4F1A\u53D1\u751F\u3002`);for(let i of window[t].get(e).values())i(r)},L=(e,r)=>{if(!r)return console.error("\u53D6\u6D88\u76D1\u542C\u5FC5\u987B\u4F20\u5165\u5DF2\u88AB\u76D1\u542C\u7684\u4E8B\u4EF6\u5904\u7406\u51FD\u6570");let t=Symbol.for("___JSUPER_EVENT_BUS___");window[t].has(e)&&window[t].get(e).delete(r)},M=()=>{let e=Symbol.for("___JSUPER_EVENT_BUS___");window[e].clear()},B=()=>{let e=Symbol.for("___JSUPER_EVENT_BUS___");return window[e]},F=()=>{let e=Symbol.for("___JSUPER_EVENT_BUS___");return window[e]||(window[e]=new Map),{emit:S,on:b,off:L,clear:M,getEvents:B}},H=F;function U(e){function r(i){let o=i.offsetLeft,n=i.offsetParent;for(;n!==null;)o+=n.offsetLeft,n=n.offsetParent;return o}function t(i){let o=i.offsetTop,n=i.offsetParent;for(;n!==null;)o+=n.offsetTop,n=n.offsetParent;return o}return{top:t(e),left:r(e)}}var N=U;import{cloneDeep as P}from"lodash-es";function c(e,r,t=1){return e.reduce((i,o)=>{let n=P(o),s=n.children&&n.children.length>0?c(n.children,r,t+1):[];return(s.length>0||r(n,t))&&(n.children=s,i.push(n)),i},[])}var J=c;function m(e,r,t){e.forEach(i=>{r(i,t),i.children?.length&&m(i.children,r,i)})}var O=m;export{g as EventBus,w as NoActionListener,x as findNodeFromTree,E as flatToTree,p as platform,N as position,O as treeEach,J as treeFilter,_ as treeMap,H as useEventBus,T as uuid};
//# sourceMappingURL=index.js.map